
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>ä¸Šä¸‹æ»šåŠ¨é¡µé¢å®ç°</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab title="ä¸Šä¸‹æ»šåŠ¨é¡µé¢å®ç°"
                  environment="web"
                  feedback-link="http://www.sctu.edu.cn">
    
      <google-codelab-step label="æ¡ˆä¾‹æè¿°" duration="0">
        <p>å°ç¨‹åºä¸­ï¼Œé¡µé¢çš„å‘ˆç°æ–¹å¼éå¸¸å¤šæ ·ï¼Œè¦ä½¿é¡µé¢ä¸åªæ˜¯å•ä¸€çš„ä¸€ä¸ªé¡µé¢ï¼Œè€Œè¦å®ç°åœ¨å½“å‰é¡µé¢çš„è‡ªç”±ä¸Šä¸‹æ»šåŠ¨ï¼Œä¸”ä¸Šä¸‹æ»šåŠ¨å‘ˆç°å‡ºæ¯ä¸ªä¸åŒæ»šåŠ¨é¡µé¢çš„å½¢å¼ï¼Œè¯¥æ€æ ·å®ç°å‘¢ï¼Ÿ</p>


      </google-codelab-step>
    
      <google-codelab-step label="æ•ˆæœå›¾" duration="0">
        <p><img src="img/d2f942bc59232f59.jpg"><img src="img/5c386c25ade39d1f.jpg"></p>


      </google-codelab-step>
    
      <google-codelab-step label="å®ç°æ­¥éª¤" duration="0">
        <h2>wxmlé¡µé¢å®ç°</h2>
<p>å°†æ¯ä¸€ä¸ªä¸åŒçš„é¡µé¢è¿›è¡Œå•ç‹¬ä¸”ç›¸ä¼¼çš„wxmlä»£ç ç¼–å†™ï¼Œæ¯ä¸ªé¡µé¢æ”¾å…¥ä¸€ä¸ªæ•´ä½“çš„viewä¸­ï¼Œè®¾ç½®bindäº‹ä»¶ç»‘å®šï¼Œscrollç»„ä»¶å®ç°æ»šåŠ¨äº‹ä»¶ã€‚scrollTouchStartâ€”â€”æ»šåŠ¨é¡µé¢èµ·å§‹ï¼ŒscrollTouchEndâ€”â€”æ»šåŠ¨é¡µé¢ç»“æŸï¼ŒscrollTouchMoveâ€”â€”æ»šåŠ¨çš„è¿‡ç¨‹ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;view id=&#39;hook1&#39; class=&#34;section section01 &#123;&#123;scrollindex==0?&#39;active&#39;:&#39;&#39;}}&#34; style=&#39;background:lightyellow&#39; bindtouchstart=&#34;scrollTouchStart&#34; bindtouchmove=&#39;scrollTouchMove&#39; bindtouchend=&#34;scrollTouchEnd&#34;&gt;
  &lt;view class=&#39;cont&#39;&gt;
    &lt;view class=&#39;cont-body&#39;&gt;
      &lt;view&gt;
      &lt;image class=&#34;pic&#34; src=&#34;/images/img1.jpg&#34;&gt;&lt;/image&gt;
      &lt;/view&gt;
      &lt;view&gt;&#34;æ„¿ç”Ÿæ´»é‡Œæœ‰çƒ­æ±¤å’Œç”œé£Ÿï¼ŒèƒŒåŒ…é‡Œæœ‰ä¹¦ç±å’Œçº¸ç¬”ã€‚ä¹¦é‡Œæ•…äº‹å¦‚è¿·å®«ï¼Œè¿·å®«é€šå‘æµ·ã€‚æ²Ÿé€šä½¿è¯¯è§£æ¶ˆé™¤ï¼Œäººè‡ªå……æ»¡å–„æ„ã€‚èµ°å¾ˆè¿œçš„è·¯å›å®¶ï¼Œæ··æ²Œä¸­ç”Ÿæ´»å‡ºæ–°çš„è‡ªå·±ã€‚ğŸ’ª&#34;
      &lt;/view&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/view&gt;
</code></pre>
<h2>wxssé…ç½®</h2>
<p>è®©æ¯ä¸ªé¡µé¢å‘ˆç°ç‹¬ç«‹æ€§ï¼Œéœ€è¦å°†é¡µé¢è®¾ç½®height:100%;å¯¹æ¯ä¸ªé¡µé¢è®¾ç½®ä¸€ä¸ªpositionå®šä½å±æ€§ä¸ºrelativeï¼Œä½¿æ¯ä¸ªé¡µé¢çš„å†…å®¹éƒ½èƒ½å¤Ÿåœ¨å•ç‹¬é¡µé¢å‘ˆç°ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>.scroll-fullpage {
  height: 100%;
}
.section {
  height: 100%;
}
.cont {
  width: 100%;
  height: 100%;
  margin: 0 auto;
  position: relative;
}
.cont-body {
  width: 75%;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}

.pic{
   height: 130rpx;
   width: 130rpx;
   border-radius: 50%
}
</code></pre>
<h2>jsé…ç½®</h2>
<p>dateæ•°æ®çš„é…ç½®å’ŒscrollTouchStartã€scrollTouchMoveã€scrollTouchEndä¸‰ä¸ªäº‹ä»¶å‡½æ•°è¿›è¡Œé…ç½®ã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>  data: {
    scrollindex: 0, 
    totalnum: 4,
    starty: 0, 
    startTime: 0,
    endy: 0, 
    endTime: 0,
    critical: 80, 
    maxTimeCritical: 300, 
    minTimeCritical: 100, 
    margintop: 0,
    currentTarget: null,
  },
</code></pre>
<pre><code> scrollTouchStart: function (e) {
    let py = e.touches[0].pageY,
      stamp = e.timeStamp,
      currentTarget = e.currentTarget.id;
    console.log(py);
    this.setData({
      starty: py,
      startTime: stamp,
      currentTarget: currentTarget
    })
  },
  scrollTouchMove(e) {
    // console.log(e);
  },
  scrollTouchEnd: function (e) {
    let py = e.changedTouches[0].pageY,
      stamp = e.timeStamp,
      d = this.data,
      timeStampdiffer = stamp - d.startTime;
    this.setData({
      endy: py,
      endTime: stamp
    })
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="æ€»ç»“" duration="0">
        <p>åœ¨é…ç½®ä¸€ä¸ªæ»šåŠ¨é¡µé¢æ—¶ï¼Œæ³¨æ„å¯¹é¡µé¢æ•´ä½“æ€§å’Œæ¯ä¸ªæ»šåŠ¨é¡µé¢ç‹¬ç«‹æ€§çš„å®ç°ã€‚æ³¨æ„ç»‘å®šäº‹ä»¶ï¼Œè°ƒç”¨scrollç»„ä»¶ã€‚</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
