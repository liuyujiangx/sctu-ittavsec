
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>ç‡ƒæ°”ç«ç„°æ£€æµ‹ä¸»è¦æ­¥éª¤è®²è§£</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab title="ç‡ƒæ°”ç«ç„°æ£€æµ‹ä¸»è¦æ­¥éª¤è®²è§£"
                  environment="web"
                  feedback-link="http://www.sctu.edu.cn">
    
      <google-codelab-step label="æ¡ˆä¾‹ä»‹ç»" duration="0">
        <p>åœ¨ç°æœ‰çš„åŸºç¡€ä¸Šï¼Œç‡ƒæ°”ç«ç„°çš„æ£€æµ‹ä¸»è¦æ˜¯åŸºäºç«ç„°é¢œè‰²ç‰¹å¾ï¼Œç”±äºç‡ƒæ°”ç«ç„°ä¸åŒäºæ™®é€šç«ç„°ï¼Œå…¶ä¸­è“è‰²åˆ†é‡è¾ƒå¤šï¼Œä¸€èˆ¬çš„æ£€æµ‹æ–¹æ³•å‡†ç¡®åº¦ä¸å¤Ÿï¼Œæ•…é‡‡å–å…¶ä»–æ–¹æ³•æ¥æ£€æµ‹ç«ç„°ï¼Œä¸‹é¢ä¸»è¦è®²è§£4ä¸ªæ­¥éª¤çš„æ€è·¯å’Œä¸»è¦pythonä»£ç ã€‚</p>


      </google-codelab-step>
    
      <google-codelab-step label="èƒŒæ™¯å·®åˆ†æ³•åˆ†ç¦»ç«ç„°" duration="10">
        <h2>ç®—æ³•æ€è·¯</h2>
<p>èƒŒæ™¯å·®åˆ†æ³•çš„ä¸»è¦æ€æƒ³æ˜¯åˆ©ç”¨æ— ç«ç„°çš„èƒŒæ™¯å›¾ä¸å«æœ‰ç«ç„°çš„å›¾ç‰‡ä½œåƒç´ ç‚¹å¯¹åƒç´ ç‚¹çš„å·®åˆ†å¤„ç†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒèƒŒæ™¯å·®åˆ†æ³•è¿ç”¨æ—¶ç”±äºéœ€è¦åšå·®åˆ†å¤„ç†ï¼Œæ‰€ä»¥éœ€è¦å°†ä¸‰ç»´çš„RGBå›¾åƒè½¬åŒ–ä¸ºä¸€ç»´çš„ç°åº¦å›¾åƒã€‚å› ä¸ºå½“ç›¸åŒèƒŒæ•ˆæœ" duration="0">
        <p><img src="img/2c7e5d50e4e1a463.png"></p>
<p><img src="img/b2dd648f7df1c0e2.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="æ­¥éª¤" duration="0">
        <h2>å›¾åƒé¢„å¤„ç†</h2>
<p>å›¾åƒé¢„å¤„ç†ä¸»è¦æ˜¯å¯¹å›¾åƒç°åº¦åŒ–å’ŒäºŒå€¼åŒ–ï¼Œç°åº¦åŒ–å›¾åƒåæ›´æœ‰åˆ©äºä¸å¿…è¦ä¿¡æ¯çš„å»é™¤ï¼Œåœ¨é€‰æ‹©ç°åº¦åŒ–æ–¹æ³•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ç”µè§†å·¥ä¸šæ ‡å‡†ï¼ŒäºŒå€¼åŒ–åçš„å›¾åƒåˆ™æœ‰åˆ©äºCannyç®—æ³•çš„è½®å»“æå–ã€‚</p>
<h2>æå–è½®å»“è¾¹ç¼˜</h2>
<p>è¾¹ç¼˜çš„æå–ä¸»è¦æ˜¯é‡‡ç”¨Cannyç®—æ³•ï¼Œå°†å›¾åƒåŒºåŸŸä¸­è¾¹ç¼˜ç‚¹æå–å‡ºæ¥ï¼ŒCannyç®—æ³•çš„å›¾åƒå¢å¼ºæ­¥éª¤ä¸­æœ‰å‡ ç§ä¸“é—¨çš„ç®—å­ï¼Œå¯¹äºè½¦ç‰ŒåŒºåŸŸçš„æå–ï¼Œä¸€èˆ¬é€‰ç”¨sobleç®—å­ã€‚</p>
<h2>å»é™¤éƒ¨åˆ†è½®å»“</h2>
<p>å»é™/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
œ€è¦å¯" duration="1">
        <p><a href="https://github.com/gschen/sctu-issue/issues/new" target="_blank">æˆ‘æœ‰é—®é¢˜</a></p>
<p>æ‰“å¼€ä¸Šè¿°é“¾æ¥ï¼Œå¯¹é—®é¢˜è¿›è¡Œè¯¦ç»†çš„æè¿°ï¼Œæˆ‘ä»¬åœ¨æ”¶åˆ°é—®é¢˜åï¼Œç¬¬ä¸€æ—¶é—´äºˆä»¥è§£ç­”ã€‚</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://stor<pre><code>def CANNY(img_path):
    # è¯»å–å›¾ç‰‡
    img = cv.imread(img_path)
    print(&#39;-----&#39;,img.shape)
    print(img[1][2])
    # BGR è½¬æ¢æˆ RGB æ ¼å¼
    https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
x())
    min = float(img.min())

    x = max - ((max - min) / 2)
    ret,img_gray = cv.threshold(img_gray, x, 255, cv.THRESH_BINARY)
    sigma1 = sigma2 = 1#è®¾ç½®æ–¹å·®
    gau_sum = 0
    gaussian = np.zeros([5, 5])
    for i in range(5):
        for j in range(5):
            gaussian[i, j] = math.exp((-1 / (2 * sigma1 * sigma2)) * (np.square(i - 3) + np.square(j - 3))) / (
                        2 * math.pi * sigma1 * sigma2)
            gau_sum = gau_sum + gaussian[i, j]
    # å½’ä¸€åŒ–å¤„ç†
    gaussian = gaussian / gau_sum
    # é«˜æ–¯æ»¤æ³¢
    W, H = img_gray.shape
    new_gray = np.zeros([W - 5, H - 5])
    for i in range(W - 5):
        for j in range(H - 5):
            new_gray[i, j] = np.sum(img_gray[i:i + 5, j:j + 5] * gaussian)#é‡‡ç”¨å·ç§¯çš„æ–¹æ³•
    cv.imshow(&#34;new_gray&#34;,new_gray)
    # è®¡ç®—æ¢¯åº¦å¹…å€¼
    W, H = new_gray.shape
    #ç”±äºæ¶‰åŠåˆ°è¾¹ç•Œçš„é—®é¢˜ï¼Œæ‰€ä»¥åˆ›å»ºçš„æ–°æ•°ç»„æ¯”åŸæ•°ç»„è¦å°‘2è¡Œ2åˆ—
    dx = np.zeros([W - 1, H - 1])
    dy = np.zeros([W - 1, H - 1])
    M = np.zeros([W - 1, H - 1])
    theta = np.zeros([W - 1, H - 1])
    #ä½¿ç”¨å¾®å·®ä»£æ›¿å¾®å•†
    &#39;&#39;&#39;
    for i in range(W - 1):
        for j in range(H - 1):
            dx[i, j] = new_gray[i + 1, j] - new_gray[i, j]
            dy[i, j] = new_gray[i, j + 1] - new_gray[i, j]
            # å›¾åƒæ¢¯åº¦å¹…å€¼ä½œä¸ºå›¾åƒå¼ºåº¦å€¼
            M[i, j] = np.sqrt(np.square(dx[i, j]) + np.square(dy[i, j]))
            # è®¡ç®—  Î¸ - artan(dx/dy)
            theta[i, j] = math.atan(dx[i, j] / (dy[i, j] + 0.000000001))
    &#39;&#39;&#39;


    #ä½¿ç”¨sobleç®—å­
    soble_X = np.array([[-1, 0, 1], [-2, 0, 2], [-1, 0, 1]])  # Xæ–¹å‘
    soble_Y = np.array([[-1, -2, -1], [0, 0, 0], [1, 2, 1]])  # Yæ–¹å‘
    for i in range(W-2):
        for j in range(H-2):
            dx[i][j] = np.sum(new_gray[i:i + 3, j:j + 3] * soble_X)
            dy[i][j] = np.sum(new_gray[i:i + 3, j:j + 3] * soble_Y)
            M[i, j] = np.sqrt(np.square(dx[i, j]) + np.square(dy[i, j]))


    &#39;&#39;&#39;
    #ä½¿ç”¨robertç®—å­

    robert = np.array([[-1,-1],[1,1]])
    for i in range(W-1):
        for j in range(H-1):
            dx[i][j] = np.sum(new_gray[i:i+2,j:j+2]*robert)
            dy[i][j] = np.sum(new_gray[i:i+2,j:j+2]*robert)
            M[i, j] = np.sqrt(np.square(dx[i, j]) + np.square(dy[i, j]))
    &#39;&#39;&#39;
    &#39;&#39;&#39;
    #ä½¿ç”¨laplaceç®—å­
    laplace1 =np.array([[0,1,0],[1,-4,1],[0,1,0]])#ç¬¬ä¸€ç§laplaceç®—å­
    laplace2 = np.array([[0,1,0],[1,-4,1],[0,1,0]])#ç¬¬äºŒç§laplaceç®—å­
    for i in range(W-2):
        for j in range(H-2):
            dx[i,j] = np.sum(new_gray[i:i+3,j:j+3]*laplace1)
            dy[i,j] = np.sum(new_gray[i:i+3,j:j+3]*laplace1)
            #dx[i,j] = np.sum(new_gray[i:i+3,j:j+3]*laplace2)
            #dy[i,j] = np.sum(new_gray[i:i+3,j:j+3]*laplace2)
            M[i,j] = np.sqrt(np.square(dx[i, j]) + np.square(dy[i, j]))
     &#39;&#39;&#39;
    #æå¤§å€¼æŠ‘åˆ¶
    d = np.copy(M)
    W, H = M.shape
    NMS = np.copy(d)
    NMS[0, :] = NMS[W - 1, :] = NMS[:, 0] = NMS[:, H - 1] = 0
    for i in range(1, W - 1):
        for j in range(1, H - 1):
            # å¦‚æœå½“å‰æ¢¯åº¦ä¸º0ï¼Œè¯¥ç‚¹å°±ä¸æ˜¯è¾¹ç¼˜ç‚¹
            if M[i, j] == 0:
                NMS[i, j] = 0
            else:
                gradX = dx[i, j]  # å½“å‰ç‚¹ x æ–¹å‘å¯¼æ•°
                gradY = dy[i, j]  # å½“å‰ç‚¹ y æ–¹å‘å¯¼æ•°
                gradTemp = d[i, j]  # å½“å‰æ¢¯åº¦ç‚¹
                # å¦‚æœ y æ–¹å‘æ¢¯åº¦å€¼æ¯”è¾ƒå¤§ï¼Œè¯´æ˜å¯¼æ•°æ–¹å‘è¶‹å‘äº y åˆ†é‡
                if np.abs(gradY) &gt; np.abs(gradX):
                    weight = np.abs(gradX) / np.abs(gradY)  # æƒé‡
                    grad2 = d[i - 1, j]
                    grad4 = d[i + 1, j]
                    # å¦‚æœ x, y æ–¹å‘å¯¼æ•°ç¬¦å·ä¸€è‡´
                    # åƒç´ ç‚¹ä½ç½®å…³ç³»
                    # g1 g2
                    #    g
                    #    g4 g3
                    if gradX * gradY &gt; 0:
                        grad1 = d[i - 1, j - 1]
                        grad3 = d[i + 1, j + 1]
                    # å¦‚æœ xï¼Œy æ–¹
      </google-codelab-step>
    
      <google-codelab-step label="æˆ‘æœ‰é—®é¢˜" duration="1">
        <p><a href="https://github.com/gschen/sctu-issue/issues/new" target="_blank">æˆ‘æœ‰é—®é¢˜</a></p>
<p>æ‰“å¼€ä¸Šè¿°é“¾æ¥ï¼Œå¯¹é—®é¢˜è¿›è¡Œè¯¦ç»†çš„æè¿°ï¼Œæˆ‘ä»¬åœ¨æ”¶åˆ°é—®é¢˜åï¼Œç¬¬ä¸€æ—¶é—´äºˆä»¥è§£ç­”ã€‚</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
, j - 1]
                        grad3 = d[i - 1, j + 1]
                    # å¦‚æœ xï¼Œy æ–¹å‘å¯¼æ•°ç¬¦å·ç›¸å
                    # åƒç´ ç‚¹ä½ç½®å…³ç³»
                    # g1
                    # g2 g g4
                    #      g3
                    else:
                        grad1 = d[i - 1, j - 1]
                        grad3 = d[i + 1, j + 1]
                # åˆ©ç”¨ grad1-grad4 å¯¹æ¢¯åº¦è¿›è¡Œæ’å€¼
                gradTemp1 = weight * grad1 + (1 - weight) * grad2
                gradTemp2 = weight * grad3 + (1 - weight) * grad4
                # å½“å‰åƒç´ çš„æ¢¯åº¦æ˜¯å±€éƒ¨çš„æœ€å¤§å€¼ï¼Œå¯èƒ½æ˜¯è¾¹ç¼˜ç‚¹
                if gradTemp &gt;= gradTemp1 and gradTemp &gt;= gradTemp2:
                    NMS[i, j] = gradTemp
                else:
                    # ä¸å¯èƒ½æ˜¯è¾¹ç¼˜ç‚¹
                    NMS[i, j] = 0
    W, H = NMS.shape
    DT = np.zeros([W, H])
    # å®šä¹‰é«˜ä½é˜ˆå€¼
    TL = 0.1 * np.max(NMS)
    TH = 0.3 * np.max(NMS)
    for i in range(1, W - 1):
        for j in range(1, H - 1):
            # åŒé˜ˆå€¼é€‰å–
            if (NMS[i, j] &lt; TL):
                DT[i, j] = 0
            elif (NMS[i, j] &gt; TH):
                DT[i, j] = 255
            # è¿æ¥
            elif (NMS[i - 1, j - 1:j + 1] &lt; TH).any() or (NMS[i + 1, j - 1:j + 1].any() or (NMS[i, [j - 1, j + 1]] &lt; TH).any()):
                DT[i, j] = 255

    kernel = np.ones((5, 20), np.uint8)
    closingimg = cv.morphologyEx(DT, cv.MORPH_CLOSE, kernel)
    cv.imshow(&#39;closingimg&#39;, closingimg)
    cv.waitKey(0)
    cv.destroyAllWindows()

    # è¿›è¡Œå¼€è¿ç®—
    openingimg = cv.morphologyEx(closingimg, cv.MORPH_OPEN, kernel)
    cv.imshow(&#39;openingimg&#39;, openingimg)
    cv.waitKey(0)
    cv.destroyAllWindows()

    # å†æ¬¡è¿›è¡Œå¼€è¿ç®—
    kernel = np.ones((11, 5), np.uint8)
    openingimg = cv.morphologyEx(openingimg, cv.MORPH_OPEN, kernel)
    cv.imshow(&#39;openingimg&#39;, openingimg)
    cv.waitKey(0)
    cv.destroyAllWindows()

    rect = locate_license(openingimg, img)
    return rect, img
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="æ€»ç»“" duration="0">
        <p>æœ¬æ–¹æ³•é€‚åˆç”¨äºæ­£é¢æ‹æ‘„çš„è½¦ç‰Œå›¾ç‰‡ï¼Œå¯ä»¥æœ‰æ•ˆçš„å°†è½¦ç‰ŒåŒºåŸŸæå–å‡ºæ¥ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€äº›å›¾ç‰‡çš„æ•ˆæœå¯èƒ½ä¼šä¸ç†æƒ³ï¼Œè¿™è·Ÿå›¾ç‰‡æ‹æ‘„çš„ç¯å¢ƒå’Œè§’åº¦éƒ½æœ‰å…³ç³»ï¼ŒåŒæ—¶ï¼Œç»“æ„å…ƒç´ çš„é€‰å–ä¹Ÿå¯ä»¥å˜åŠ¨ï¼Œè¿™ä¹Ÿé€ æˆäº†æå–æ•ˆæœçš„ä¸åŒï¼Œæ‰€ä»¥å¯¹äºè½¦ç‰Œæå–çš„ç®—æ³•è¿˜éœ€è¦ä¸æ–­çš„è¿›è¡Œä¼˜åŒ–ã€‚</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
